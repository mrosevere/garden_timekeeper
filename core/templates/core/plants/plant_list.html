{% extends "core/base.html" %} {% block content %}
<div class="container py-4">
  <h1>Your Garden Plants</h1>

  <a href="{% url 'plant_create' %}" class="btn btn-primary mb-3">Add New Plant</a>

  {% if plants %}
  <table class="table table-striped align-middle">
    <thead>
      <tr>
        <th>Name</th>
        <th>Location</th>
        <th>Created</th>
        <th style="width: 150px">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for plant in plants %}
      <tr>
        <td>
          <a href="{% url 'plant_detail' plant.pk %}"> {{ plant.name }} </a>
        </td>
        <td>{{ plant.location|default:"â€”" }}</td>
        <td>{{ plant.created_at|date:"Y-m-d" }}</td>
        <td>
          <a
            href="{% url 'plant_edit' plant.pk %}"
            class="btn btn-sm btn-outline-secondary me-2"
          >
            Edit
          </a>

          <!-- Delete modal trigger -->
          <button
            class="btn btn-sm btn-outline-danger"
            data-bs-toggle="modal"
            data-bs-target="#deleteModal-{{ plant.pk }}"
          >
            Delete
          </button>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  <!-- Delete modals -->
  {% for plant in plants %}
  <div
    class="modal fade"
    id="deleteModal-{{ plant.pk }}"
    tabindex="-1"
    aria-hidden="true"
  >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Delete Garden Plant</h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
          ></button>
        </div>

        <div class="modal-body">
          Are you sure you want to delete <strong>{{ plant.name }}</strong>?
        </div>

        <div class="modal-footer">
          <form method="post" action="{% url 'plant_delete' plant.pk %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger">Yes, delete</button>
          </form>
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>
  {% endfor %} {% else %}
  <p>You have no garden plants yet.</p>
  {% endif %}
</div>

{% endblock %}
